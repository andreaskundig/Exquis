{"setup":"this.start = new Date();\nthis.frameCount = 0;\n\nthis.toRadians = function(degrees){\n    return  degrees * Math.PI / 180; \n};\nthis.rotation = 0;\nthis.halfWidth = context.canvas.width / 2;\nthis.halfHeight = context.canvas.height / 2;\n\nthis.tempCanvas = document.createElement(\"canvas\");\nthis.tempCtx = tempCanvas.getContext(\"2d\");\n \nthis.tempCanvas.width = context.canvas.width;\nthis.tempCanvas.height = context.canvas.height;\nthis.tempCtx.drawImage(context.canvas,0,0,context.canvas.width, context.canvas.height);\ndocument.body.appendChild(this.tempCanvas);","draw":"this.rotate = function(degrees){\ncontext.setTransform(1, 0, 0, 1, 0, 0);\n\ncontext.save();\n\nthis.tempCtx.drawImage(context.canvas,0,0,context.canvas.width, context.canvas.height);\n\n  //var currentImage = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\n  //context.translate(this.halfWidth, this.halfHeight);\n //context.scale(Math.cos(this.rotation * 0.1 ) * 4, Math.sin(this.rotation * 0.1) * 4  );\n\n  context.rotate(this.toRadians(this.rotation)); \n  //context.drawImage(this.tempCtx,100,0,context.canvas.width*0.5, context.canvas.height*0.5);\n  this.rotation = (this.rotation + degrees ) % 360;\n\n //context.fillStyle = \"rgb(200,100,100)\";\n  //context.fillRect(0,0, this.halfWidth, this.halfWidth);\n\ncontext.restore();\n}\n\n\n\n\nthis.frameCount++; \nvar now = new Date();\nvar elapsed = now - this.start;\nvar motherPeriodDuration = 1000;\nvar motherPeriodCount = Math.floor((elapsed) / motherPeriodDuration);\nvar timeSinceMotherPeriod = elapsed - motherPeriodCount * motherPeriodDuration ;\nvar currentImage = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\n\n\nif(motherPeriodCount % 4 == 0){\n    //if(Math.random() > 0.5){\n    // paste current image one pixel west\n    context.putImageData(currentImage, 1, 0);\n    // add new line\n    context.putImageData(borders.west, 0, 0);\n}else if(motherPeriodCount % 4 == 1){\n    //rotate right 90.\n\n    this.rotate(2);\n}else if(motherPeriodCount % 4 == 2){\n    // north\n    context.putImageData(currentImage, 0, 1);\n    // add new line\n    context.putImageData(borders.north, 0, 0);\n}else{\n //rotate left 90. \n    //this.rotate(-2);\n}"}